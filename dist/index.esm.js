/*!
 * @darwishdev/dash-dev v0.0.1
 * (c) 2023 ahmed darwish <a.darwish.dev@gmail.com>
 * Released under the MIT License.
 */
import{QInput,QIcon,QPopupProxy,QDate,QBtn,QForm,QSelect,QRange,QRadio,QCheckbox,QOptionGroup,QSlider,QToggle}from"quasar";import{ref,h,onBeforeMount}from"vue";var DDate={name:"DDate",props:{modelValue:String,inputProps:Object,pickerProps:Object,isRequired:{type:Boolean,default:!1},transition:{type:String,default:"scale"},closeOnContentClick:{type:Boolean,default:!0},isIcon:{type:Boolean,default:!1}},setup:function(n,e){e.slots;function t(e){return!n.isRequired||null!=e&&""!=e&&null!=e&&/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)||"Required_date"}var a=e.emit,o=ref(!1),u=ref("");return n.isRequired.toString(),function(){return h(QInput,Object.assign({},n.inputProps,{modelValue:n.pickerProps.range?u:n.modelValue,readonly:n.pickerProps.range,rules:[t],onClick:function(){return n.pickerProps.range?o.value=!o.value:null},mask:n.pickerProps.range?"":"date","onUpdate:modelValue":function(e){n.pickerProps.range||a("update:modelValue",e)}}),{append:function(){return h(QIcon,{name:"event",class:"cursor-pointer"},[h(QPopupProxy,{cover:!0,modelValue:o.value,"onUpdate:modelValue":function(e){o.value=e},transitionShow:n.transition,transitionHide:n.transition},[h(QDate,Object.assign({},{modelValue:n.modelValue},n.pickerProps,{"onUpdate:modelValue":function(e){a("update:modelValue",e),n.pickerProps.range&&(u.value=e.from+" : "+e.to),n.closeOnContentClick&&(o.value=!1)}}),[n.closeOnContentClick?void 0:h("div",{class:"row items-center justify-end q-gutter-sm"},[h(QBtn,{label:"Close",flat:!0,onClick:function(){return o.value=!1}})])])])])}})}}},DForm={name:"DForm",props:{default:Object,inputs:Array,submitCallback:Function,modelValue:{type:Object,default:function(){return{}}},url:String,method:String},emits:["update","onSubmit","update:modelValue"],setup:function(t,e){var a=e.slots,o=e.emit,u={QInput:QInput,QSelect:QSelect,QBtn:QBtn,QRange:QRange,QDate:QDate,QRadio:QRadio,DDate:DDate,QCheckbox:QCheckbox,QOptionGroup:QOptionGroup,QSlider:QSlider,QToggle:QToggle},n=ref(null),l=ref(!1);function i(){t.inputs.forEach(function(e){return t.modelValue[e.default.name]=null})}function r(){o("onSubmit")}return onBeforeMount(function(){t.default.class+=" MForm",t.inputs.forEach(function(n){n.initialValue&&(t.modelValue[n.default.name]=n.initialValue),"function"==typeof n.getData&&(n.default.loading=!0,n.getData().then(function(e){n.default.options=e,n.default.loading=!1}).catch(function(e){console.log(e),n.default.loading=!1}))})}),function(){return l.value?h("div",{innerHTML:"Loading..."}):h(QForm,Object.assign({},t.default,{ref:n,onreset:i,submit:r}),t.inputs.map(function(n){return h("div",{class:"MForm__input "+n.cols},[null!=a["before-input-"+n.default.name]?a["before-input-"+n.default.name]():null,null==a["input-"+n.default.name]?h(u[n.component],Object.assign({},n.default,{modelValue:t.modelValue[n.default.name],"onUpdate:modelValue":function(e){t.modelValue[n.default.name]=e,o("update:modelValue",t.modelValue)}})):a["input-"+n.default.name](),null!=a["after-input-"+n.default.name]?a["after-input-"+n.default.name]():null])}))}}},DTable={name:"DTable",props:{default:Object,inputs:Array,submitCallback:Function,modelValue:{type:Object,default:function(){return{}}},url:String,method:String},emits:["update","onSubmit","update:modelValue"],setup:function(t,e){var a=e.slots,o=e.emit,u={QInput:QInput,QSelect:QSelect,QBtn:QBtn,QRange:QRange,QDate:QDate,QRadio:QRadio,QCheckbox:QCheckbox,QOptionGroup:QOptionGroup,QSlider:QSlider,QToggle:QToggle},n=ref(null),l=ref(!1);function i(){t.inputs.forEach(function(e){return t.modelValue[e.default.name]=null})}function r(){o("onSubmit")}return onBeforeMount(function(){t.default.class+=" MForm",t.inputs.forEach(function(n){n.initialValue&&(t.modelValue[n.default.name]=n.initialValue),"function"==typeof n.getData&&(n.default.loading=!0,n.getData().then(function(e){n.default.options=e,n.default.loading=!1}).catch(function(e){console.log(e),n.default.loading=!1}))})}),function(){return l.value?h("div",{innerHTML:"Loading..."}):h(QForm,Object.assign({},t.default,{autofocus:!0,ref:n,onreset:i,submit:r}),t.inputs.map(function(n){return h("div",{class:"MForm__input "+n.cols},[null!=a["before-input-"+n.default.name]?a["before-input-"+n.default.name]():null,null==a["input-"+n.default.name]?h(u[n.component],Object.assign({},n.default,{modelValue:t.modelValue[n.default.name],"onUpdate:modelValue":function(e){t.modelValue[n.default.name]=e,o("update:modelValue",t.modelValue)}})):a["input-"+n.default.name](),null!=a["after-input-"+n.default.name]?a["after-input-"+n.default.name]():null])}))}}},version="0.0.1";function install(e){e.component(DForm.name,DForm),e.component(DDate.name,DDate),e.component(DTable.name,DTable)}var VuePlugin=Object.freeze({__proto__:null,version:version,DForm:DForm,DDate:DDate,DTable:DTable,install:install});export{DDate,DForm,DTable,VuePlugin as default,install,version};